const keystone = require('keystone'),
      Types = keystone.Field.Types;

const GalleryImage = new keystone.List('GalleryImage', {
    drilldown: 'album',
});

const galleryStorage = new keystone.Storage({
    adapter: keystone.Storage.Adapters.FS,
    fs: {
        path: 'uploads/gallery',
        publicPath: '/gallery',
    },
});

GalleryImage.add({
    title: { type: String, initial: true, unique: true },
    image: { type: Types.File, storage: galleryStorage },
    album: { type: Types.Relationship, ref: 'Gallery' },
});

GalleryImage.relationship({
    path: 'image',
    ref: 'Gallery',
    refPath: 'images',
});

GalleryImage.register();
