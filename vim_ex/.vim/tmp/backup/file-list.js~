import React, { Component } from 'react';
import Time from './time';

class FileList extends Component {
  render() {
    const files = this.props.files;
    console.log(files);
    return (
      <table className='file-list'>
        <tbody>
          { files.map( file => (
            <FileListItem key={ file.id } file={ file } />
          )) }
        </tbody>
      </table>
    )
  }
}

FileList.propTypes = {
  files: React.PropTypes.array,
}

class FileListItem extends Component {
  render() {
    const {file} = this.props;
    return (
      <tr className='file-list-item'>
        { getFileName(file) }
        <td><CommitMessage commit={ file.latestCommit } /></td>
        
        <td className='age'>
          <Time time={ file.updated_at } />
        </td>
      </tr>
    )
  }
}

function CommitMessage({ commit }) {
  return (
    <td className='commit-message'>{ commit.message }</td>
  );
}

CommitMessage.propTypes = {
  commit: React.PropTypes.object.isRequired,
}

function FileIcon({ file }) {
  const icon = file.type === 'folder' ? 'fa-folder' : 'fa-file-text-o';
  return  (
    <td className='file-icon'>
      <i className={`fa ${ icon }`} />
    </td>
  )
}

FileIcon.propTypes = {
  file: React.PropTypes.object.isRequired,
};

function getFileName(file) {
  return [
    <FileIcon file={ file } key={ 0 } />,
    <td  className='file-name' key={ 1 }>{ file.name }</td>
  ];
}

// class FileIcon extends Component {
//   render() {
//     return (
//     )
//   }
// }

export default FileList
