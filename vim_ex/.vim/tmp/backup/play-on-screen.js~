const throttle = require('lodash/throttle')

const players = 
    Array.from(document.querySelectorAll('.js-play-on-screen'));



const isOnScreen = (el) => 
    el.getBoundingClientRect().top > 0  &&
    el.getBoundingClientRect().bottom < window.innerHeight;


const playAnimation = (el) => {
    if(isOnScreen(el)) el.style.animationPlayState = 'running';
}


const render = (el_arr) => el_arr.forEach(playAnimation);

const update = throttle(() => render(players), 150);



function init() { 
    update();
    window.addEventListener('scroll', update);
}


module.exports = {init: init};
